<?xml version="1.0" encoding="utf-8" ?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="3.5">

  <PropertyGroup>
    <!-- Build dependencies -->
    <Log4NetVersion>log4net-1.2.10</Log4NetVersion>
    <Log4NetUrl>http://archive.apache.org/dist/incubator/log4net/1.2.10/incubating-log4net-1.2.10.zip</Log4NetUrl>
  </PropertyGroup>

  <Target Name="Initialize">
    <MakeDir Directories="$(WorkDir)" />
  </Target>

  <Target Name="FetchLog4Net">
    <CallTarget Targets="DownloadLog4Net" Condition="!Exists('$(WorkDir)\$(Log4NetVersion)')" />
    <Copy
      SourceFiles="$(WorkDir)\$(Log4NetVersion)\bin\net\2.0\release\log4net.dll"
      DestinationFolder="$(LibDir)" />
  </Target>

  <Target Name="DownloadLog4Net">
    <Message Text="Fetching log4net zip distribution from Web" />
    <WebDownload FileUri="$(Log4NetUrl)" FileName="$(WorkDir)\log4net.zip" />
    <Message Text="Extracting log4net zip archive" />
    <Unzip ZipFileName="$(WorkDir)\log4net.zip" TargetDirectory="$(WorkDir)" />
  </Target>
</Project>

